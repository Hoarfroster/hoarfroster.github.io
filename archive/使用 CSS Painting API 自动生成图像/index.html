<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä½¿ç”¨ CSS Painting API è‡ªåŠ¨ç”Ÿæˆå›¾åƒ</title>
    <script src="/assets/script/main.js"></script>
    <link rel="stylesheet" href="/assets/style/styles.css">
</head>

<body>
    <div class="header">
    <div class="container">
        <div class="icon">
            <img src="/assets/media/vectors/hoarfroster-text.svg" alt="Hoarfroster Logo with Text">
        </div>
        <nav class="navigation">
            <ul class="header-navigation-list">
                <li><a href="/">é¦–é¡µ</a></li>
                <li><a href="/archive.html">æ–‡ç« </a></li>
                <li><a href="/about.html">å…³äº</a></li>
            </ul>
            <form action="/search" method="post">
                <label>
                    <input type="text" class="search" placeholder="æœç´¢å’•å’•å’•çš„å°ç«™"/>
                </label>
                <label class="submit">
                    <input type="submit"/>
                </label>
            </form>
        </nav>
        <ul class="social-accounts">
            <li>
                <a href="https://www.zhihu.com/people/shuang-yu-29-75">
                    <i class="fa-brands fa-zhihu" style="font-size: 20px; color:#06f; line-height: 20px;"></i>
                </a>
            </li>
            <li>
                <a href="https://github.com/PassionPenguin">
                    <img src="/assets/media/vectors/github.svg" alt="github-logo"/>
                </a>
            </li>
            <li>
                <a href="https://dribbble.com/Hoarfroster">
                    <img src="/assets/media/vectors/dribbble.svg" alt="dribbble-logo"/>
                </a>
            </li>
        </ul>
    </div>
</div>
    <div class="content article">
        <article>
            <div class="title">
                <h1>ä½¿ç”¨ CSS Painting API è‡ªåŠ¨ç”Ÿæˆå›¾åƒ</h1>
                <p><span class='chars'>undefined chars</span><span class='created-date'>Created Sat May 28 2022 23:43:08 GM</span><span class='modified-date'>Modified Sat May 28 2022 23:43:08 GM</span></p>
            </div>
            <div class="main markdown-body">
                

<blockquote>
<ul>
<li>åŸæ–‡åœ°å€ï¼š<a href="https://blog.bitsrc.io/programmatically-generate-images-with-css-painting-api-3b1a860dae3b">Programmatically
generate images with CSS Painting API</a></li>
<li>åŸæ–‡ä½œè€…ï¼š<a href="https://medium.com/@viduniwickramarachchi">Viduni
Wickramarachchi</a></li>
<li>è¯‘è€…ï¼š<a href="https://github.com/PassionPenguin">éœœç¾½
Hoarfroster</a></li>
<li>æ ¡å¯¹è€…ï¼š<a href="https://github.com/zenblo">zenblo</a>ã€<a href="https://github.com/lsvih">lsvih</a></li>
</ul>
</blockquote>
<p><img src="https://cdn-images-1.medium.com/max/5760/1*wKYGWd-7eWgpmMeBNiLCDA.jpeg" alt="Banner"></p>
<p>å›¾åƒä¸ºåº”ç”¨ç¨‹åºå¢æ·»è‰²å½©ï¼Œä¸°å¯Œå†…å®¹ã€‚ç„¶è€Œï¼Œå¦‚æœç½‘é¡µä¸­åµŒå…¥äº†å¤§é‡é«˜åˆ†è¾¨ç‡å›¾åƒï¼Œä¼šå¤§é‡å¢åŠ é¡µé¢èµ„æºåŠ è½½æ—¶é—´ï¼Œä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒã€‚å¯¹äºå±•ç¤ºäº§å“ã€æ–¹æ¡ˆç­‰å¿…é¡»å†…å®¹çš„å›¾åƒï¼Œæˆ‘ä»¬åˆ«æ— é€‰æ‹©ï¼Œåªèƒ½æŒ‰ç…§æ­£å¸¸æ–¹å¼åµŒå…¥è¿™äº›å›¾åƒå¹¶é€šè¿‡ç¼“å­˜å®ƒä»¬æ¥ä¼˜åŒ–åº”ç”¨ç¨‹åºã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬åœ¨åº”ç”¨ç¨‹åºä¸­éœ€è¦å‡ ä½•å›¾åƒï¼Œåˆ™ä¸å¿…å†å°†å…¶ä½œä¸ºèµ„æºæ¥åŠ è½½ã€‚</p>
<blockquote>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ CSS Painting API å³æ—¶ç”Ÿæˆå‡ ä½•å›¾åƒã€‚</p>
</blockquote>
<p>è®©æˆ‘ä»¬ä¸€èµ·æ¥èµ°è¿›è¿™ä¸ª APIï¼Œå¹¶ä¸”å­¦ä¹ å¦‚ä½•ä½¿ç”¨å®ƒç”Ÿæˆå›¾åƒå§ï½</p>
<h2 id="css-painting-api-çš„ç®€ä»‹">CSS Painting API çš„ç®€ä»‹</h2>
<p>å¼€å‘è€…ä»¬èƒ½å¤Ÿä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/API/CSS_Painting_API">CSS
Painting API</a> ä½¿ç”¨ç¼–å†™çš„ JavaScript å‡½æ•°å°†å›¾åƒç»˜åˆ¶åˆ° CSS å±æ€§ä¸­ï¼Œä¾‹å¦‚
<code>background-image</code>å’Œ <code>border</code>ã€‚å®ƒæä¾›äº†ä¸€ç»„
APIï¼Œä½¿å¼€å‘äººå‘˜å¯ä»¥è®¿é—® CSSOMï¼ŒCSS Houdiniï¼ˆ<a href="https://github.com/w3c/css-houdini-drafts">Houdini</a>ï¼‰çš„ä¸€éƒ¨åˆ†
â€”â€” æ–°æµè§ˆå™¨ API çš„é›†åˆï¼Œä¸ºå¼€å‘äººå‘˜æä¾›äº†å¯¹ CSS
æœ¬èº«çš„æ›´åº•å±‚çš„è®¿é—®æ–¹æ³•ã€‚ï¼‰</p>
<p>åµŒå…¥å›¾åƒçš„ä¼ ç»Ÿæ–¹æ³•å¦‚ä¸‹ã€‚</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>div {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">background-image</span>: <span class="fu">url(</span><span class="st">'assets/background.jpg'</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>è€Œå¦‚æœä½¿ç”¨ CSS Painting APIï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨ <code>paint()</code>
å‡½æ•°ï¼Œå¹¶ä¸”ä¼ å…¥ä¸€ä¸ª JavaScript å£°æ˜å¥½çš„ Workletï¼š</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>div {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">background-image</span>: paint<span class="fu">(</span><span class="cn">background</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>è¿™ä¸²ä»£ç çš„å·¥ä½œé€»è¾‘æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*c2EShrISdnmcxc87qJdKPg.png"></p>
<p>åœ¨ä¸Šæ–‡ä¸­ä¼¼ä¹å­˜åœ¨ç€ä¸€äº›æ™¦æ¶©éš¾æ‡‚çš„æœ¯è¯­ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æåŠäº†
<code>worklet</code>ï¼Ÿ</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œè®©ç¨‹åºè‡ªåŠ¨ç”Ÿæˆå›¾åƒçš„ JavaScript ä»£ç ç§°ä¸º Paint Workletã€‚<a href="https://www.w3.org/TR/worklets-1/#intro">Worklet</a>
æ˜¯æµè§ˆå™¨æ¸²æŸ“ç®¡é“çš„ä¸€ä¸ªæ‰©å±•ã€‚é™¤äº† Paint Worklet ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–ç±»å‹çš„
Workletï¼Œä¾‹å¦‚ Animation Worklet å’Œ Layout Workletã€‚</p>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ç¨‹åºç”Ÿæˆå›¾åƒçš„åˆ†æ­¥æ–¹æ³•ã€‚</p>
<h2 id="åœ¨å®è·µä¸­ä½¿ç”¨-css-painting-api">åœ¨å®è·µä¸­ä½¿ç”¨ CSS Painting
API</h2>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šæ¢è®¨å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ°”æ³¡èƒŒæ™¯</p>
<h4 id="ç¬¬ä¸€æ­¥æ·»åŠ -css-paint-å‡½æ•°">ç¬¬ä¸€æ­¥ï¼šæ·»åŠ  CSS paint() å‡½æ•°</h4>
<p>åœ¨å¼€å§‹è¿™ä¸€åˆ‡ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¾€æ‰€éœ€è¦æ·»åŠ å›¾ç‰‡çš„ CSS å±æ€§ä¸­æ·»åŠ 
<code>paint()</code> å‡½æ•°ã€‚</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">.bubble-background</span> {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span>: <span class="dv">400</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">height</span>: <span class="dv">400</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">background-image</span>: paint<span class="fu">(</span>bubble<span class="fu">)</span><span class="op">;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><code>bubble</code> å°±æ˜¯æˆ‘ä»¬ç­‰ä¸‹ç”Ÿæˆå›¾ç‰‡çš„ Workletï¼Œè€Œè¦ç”Ÿæˆ
Workletï¼Œä»…ä»…åªéœ€è¦çŸ­çŸ­å‡ æ­¥ã€‚</p>
<h4 id="ç¬¬äºŒæ­¥å®šä¹‰-worklet">ç¬¬äºŒæ­¥ï¼šå®šä¹‰ Worklet</h4>
<p>Worklet éœ€è¦åœ¨å¤–éƒ¨ JavaScript æ–‡ä»¶ä¸­è¢«ä¿å­˜ï¼Œè€Œ Painting Worklet
åº”è¯¥æ˜¯ä¸€ä¸ª <code>class</code>ï¼Œä¾‹å¦‚
<code>class Bubble { â€¦â€¦ }</code>ï¼Œç„¶åè¿™ä¸ª Worklet éœ€è¦ä½¿ç”¨
<code>registerPaint()</code> å‡½æ•°æ³¨å†Œã€‚</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Bubble {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paint</span>(context<span class="op">,</span> canvas<span class="op">,</span> properties) {</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* </span><span class="al">TODO</span><span class="co">: ... */</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="fu">registerPaint</span>(<span class="st">'bubble'</span><span class="op">,</span> Bubble)<span class="op">;</span></span></code></pre></div>
<p><code>registerPaint()</code> å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æˆ‘ä»¬å‘åœ¨ CSS
ä¸­ä½¿ç”¨çš„å‚è€ƒåã€‚</p>
<p>ç°åœ¨å°±è®©æˆ‘ä»¬æ¥ç»˜åˆ¶èƒŒæ™¯å§ï¼</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Bubble {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paint</span>(context<span class="op">,</span> canvas<span class="op">,</span> properties) {</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> circleSize <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> bodyWidth <span class="op">=</span> canvas<span class="op">.</span><span class="at">width</span><span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> bodyHeight <span class="op">=</span> canvas<span class="op">.</span><span class="at">height</span><span class="op">;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> maxX <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(bodyWidth <span class="op">/</span> circleSize)<span class="op">;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> maxY <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(bodyHeight <span class="op">/</span> circleSize)<span class="op">;</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (<span class="kw">let</span> y <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> y <span class="op">&lt;</span> maxY<span class="op">;</span> y<span class="op">++</span>) {</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> (<span class="kw">let</span> x <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> x <span class="op">&lt;</span> maxX<span class="op">;</span> x<span class="op">++</span>) {</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>                context<span class="op">.</span><span class="at">fillStyle</span> <span class="op">=</span> <span class="st">'#eee'</span><span class="op">;</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>                context<span class="op">.</span><span class="fu">beginPath</span>()<span class="op">;</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>                context<span class="op">.</span><span class="fu">arc</span>(x <span class="op">*</span> circleSize <span class="op">*</span> <span class="dv">2</span> <span class="op">+</span> circleSize<span class="op">,</span> y <span class="op">*</span> circleSize <span class="op">*</span> <span class="dv">2</span> <span class="op">+</span> circleSize<span class="op">,</span> circleSize<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">2</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span><span class="op">,</span> <span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>                context<span class="op">.</span><span class="fu">closePath</span>()<span class="op">;</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>                context<span class="op">.</span><span class="fu">fill</span>()<span class="op">;</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="fu">registerPaint</span>(<span class="st">'bubble'</span><span class="op">,</span> Bubble)<span class="op">;</span></span></code></pre></div>
<p>åˆ›å»ºå›¾åƒçš„è¿ç®—æ˜¯åœ¨ <code>paint()</code>
å‡½æ•°çš„å†…éƒ¨è¿›è¡Œçš„ã€‚æˆ‘ä»¬å°†éœ€è¦ä¸€äº›æœ‰å…³ Canvas
çš„çŸ¥è¯†æ¥ç»˜åˆ¶ä¸Šè¿°å›¾åƒã€‚å¦‚æœä¸ç†Ÿæ‚‰ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥çœ‹ä¸€ä¸‹ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial">Canvas
API</a> æ–‡æ¡£ã€‚</p>
<h4 id="ç¬¬ä¸‰æ­¥è°ƒç”¨-worklet">ç¬¬ä¸‰æ­¥ï¼šè°ƒç”¨ Worklet</h4>
<p>æœ€åä¸€æ­¥æ˜¯åœ¨ HTML æ–‡ä»¶ä¸­è°ƒç”¨ Workletã€‚</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">"bubble-background"</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script&gt;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CSS</span><span class="op">.</span><span class="at">paintWorklet</span><span class="op">.</span><span class="fu">addModule</span>(<span class="st">'https://codepen.io/viduni94/pen/ZEpgMja.js'</span>)<span class="op">;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/script&gt;</span></span></code></pre></div>
<p>è¿™å°±å¥½å•¦ï¼</p>
<p>ä½ ç°åœ¨å·²ç»åœ¨ä¸‰æ­¥ä¹‹å†…ç”¨ç¨‹åºè‡ªåŠ¨ç”Ÿæˆä¸€å¼ å›¾ç‰‡å•¦ï¼</p>
<h2 id="ç”Ÿæˆçš„å›¾ç‰‡">ç”Ÿæˆçš„å›¾ç‰‡</h2>
<p>æˆ‘ä»¬æ‰€ç¼–å†™çš„çš„ä»£ç çš„è¿è¡Œæ•ˆæœåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://cdn-images-1.medium.com/max/2448/1*vvLIdPpqWdRWswddJ9CgUw.png" alt="åœ¨ç¼–è¾‘å™¨ä¸­æŸ¥çœ‹"></p>
<h2 id="æˆ‘ä»¬è¿˜å¯ä»¥ç”¨-css-painting-api-å¹²äº›ä»€ä¹ˆå‘¢">æˆ‘ä»¬è¿˜å¯ä»¥ç”¨ CSS
Painting API å¹²äº›ä»€ä¹ˆå‘¢ï¼Ÿ</h2>
<p>The power of the CSS Painting API is not over yet. There are more
things you can do with it.</p>
<h4 id="1-æˆ‘ä»¬å¯ä»¥åˆ›å»ºåŠ¨å›¾">1. æˆ‘ä»¬å¯ä»¥åˆ›å»ºåŠ¨å›¾</h4>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€æ›´æ”¹æ°”æ³¡çš„é¢œè‰²ï¼Œè€Œ CSS
å˜é‡å°±æ˜¯æœåŠ¡æ­¤ç›®çš„çš„ã€‚ä¸ºäº†ä½¿ç”¨ CSS
å˜é‡ï¼Œæµè§ˆå™¨åº”è¯¥å…ˆæ˜ç™½æˆ‘ä»¬åœ¨ä½¿ç”¨å®ƒã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨
<code>inputProperties()</code> å‡½æ•°æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">registerPaint</span>(<span class="st">'bubble'</span><span class="op">,</span> <span class="kw">class</span> {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">static</span> get <span class="fu">inputProperties</span>() {</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> [<span class="st">'--bubble-size'</span><span class="op">,</span> <span class="st">'--bubble-color'</span>]<span class="op">;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paint</span>() {</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* ... */</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>å˜é‡ä»¬å¯ä»¥é€šè¿‡ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ ç»™ <code>paint()</code> æ–¹æ³•</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paint</span>(context<span class="op">,</span> canvas<span class="op">,</span> properties)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> circleSize <span class="op">=</span> <span class="pp">parseInt</span>(properties<span class="op">.</span><span class="fu">get</span>(<span class="st">'--bubble-size'</span>)<span class="op">.</span><span class="fu">toString</span>())<span class="op">;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> circleColor <span class="op">=</span> properties<span class="op">.</span><span class="fu">get</span>(<span class="st">'--bubble-color'</span>)<span class="op">.</span><span class="fu">toString</span>()<span class="op">;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> bodyWidth <span class="op">=</span> canvas<span class="op">.</span><span class="at">width</span><span class="op">;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> bodyHeight <span class="op">=</span> canvas<span class="op">.</span><span class="at">height</span><span class="op">;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> maxX <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(bodyWidth <span class="op">/</span> circleSize)<span class="op">;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> maxY <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(bodyHeight <span class="op">/</span> circleSize)<span class="op">;</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> y <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> y <span class="op">&lt;</span> maxY<span class="op">;</span> y<span class="op">++</span>) {</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (<span class="kw">let</span> x <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> x <span class="op">&lt;</span> maxX<span class="op">;</span> x<span class="op">++</span>) {</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>            context<span class="op">.</span><span class="at">fillStyle</span> <span class="op">=</span> circleColor<span class="op">;</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>            context<span class="op">.</span><span class="fu">beginPath</span>()<span class="op">;</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>            context<span class="op">.</span><span class="fu">arc</span>(x <span class="op">*</span> circleSize <span class="op">*</span> <span class="dv">2</span> <span class="op">+</span> circleSize<span class="op">,</span> y <span class="op">*</span> circleSize <span class="op">*</span> <span class="dv">2</span> <span class="op">+</span> circleSize<span class="op">,</span> circleSize<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">2</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span><span class="op">,</span> <span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>            context<span class="op">.</span><span class="fu">closePath</span>()<span class="op">;</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>            context<span class="op">.</span><span class="fu">fill</span>()<span class="op">;</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h4 id="2-æˆ‘ä»¬å¯ä»¥ä½¿ç”¨-mathrandom-åœ¨-paint-å‡½æ•°ä¸­ç”Ÿæˆéšæœºçš„å›¾ç‰‡">2.
æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Math.random()</code> åœ¨ <code>paint()</code>
å‡½æ•°ä¸­ç”Ÿæˆéšæœºçš„å›¾ç‰‡</h4>
<div class="sourceCode" id="cb9"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>body {</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span>: <span class="dv">200</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">height</span>: <span class="dv">200</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">background-image</span>: paint<span class="fu">(</span>random<span class="fu">)</span><span class="op">;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">getRandomHexColor</span>() {</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">'#'</span> <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>() <span class="op">*</span> <span class="dv">16777215</span>)<span class="op">.</span><span class="fu">toString</span>(<span class="dv">16</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Random {</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paint</span>(context<span class="op">,</span> canvas) {</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> color1 <span class="op">=</span> <span class="fu">getRandomHexColor</span>()<span class="op">;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> color2 <span class="op">=</span> <span class="fu">getRandomHexColor</span>()<span class="op">;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> gradient <span class="op">=</span> context<span class="op">.</span><span class="fu">createLinearGradient</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> canvas<span class="op">.</span><span class="at">width</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        gradient<span class="op">.</span><span class="fu">addColorStop</span>(<span class="dv">0</span><span class="op">,</span> color1)<span class="op">;</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>        gradient<span class="op">.</span><span class="fu">addColorStop</span>(<span class="dv">1</span><span class="op">,</span> color2)<span class="op">;</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>        context<span class="op">.</span><span class="at">fillStyle</span> <span class="op">=</span> gradient<span class="op">;</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>        context<span class="op">.</span><span class="fu">fillRect</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> canvas<span class="op">.</span><span class="at">width</span><span class="op">,</span> canvas<span class="op">.</span><span class="at">height</span>)<span class="op">;</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="fu">registerPaint</span>(<span class="st">'random'</span><span class="op">,</span> Random)<span class="op">;</span></span></code></pre></div>
<p>å¦‚æœä½ åœ¨å¦‚ä½•åšåˆ°è¿™äº›ä¸Šå­˜åœ¨ç–‘æƒ‘ï¼Œè¯·åœ¨è¯„è®ºåŒºä¸­æå‡ºä½ çš„é—®é¢˜ã€‚</p>
<p>è¿™ä¸ªçœŸæ˜¯å¤ªæ£’å•¦ï¼</p>
<p>ä½†æ˜¯ï¼Œå¥½äº‹æ€»æœ‰ç³Ÿç³•çš„ä¸€é¢ï¼Œè¿™ä¸ª API
ç°åœ¨ä»…ä»…åªè¢«éƒ¨åˆ†æµè§ˆå™¨æ‰€æœ‰é™åˆ¶çš„æ”¯æŒã€‚</p>
<h2 id="æµè§ˆå™¨æ”¯æŒ">æµè§ˆå™¨æ”¯æŒ</h2>
<p><img src="https://github.com/PassionPenguin/picgo-database/blob/main/programmatically-generate-images-with-css-painting-api-caniuse.com_css-paint-api.png?raw=true" alt="æ•°æ®æºï¼šCan I Use"></p>
<p>åŒ…æ‹¬ Firefox åœ¨å†…çš„å¤§å¤šæ•°æµè§ˆå™¨éƒ½ä¸æ”¯æŒ CSS Painting
APIã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåªæœ‰åŸºäº Chromium
çš„æµè§ˆå™¨å®Œå…¨æ”¯æŒæ­¤åŠŸèƒ½ï¼ŒçœŸå¸Œæœ›ä¸ä¹…çš„å°†æ¥æµè§ˆå™¨æ”¯æŒä¼šæœ‰æ‰€æ”¹å–„ã€‚</p>
<h2 id="æ‘˜è¦">æ‘˜è¦</h2>
<p>CSS Painting API
å¯¹äºå‡å°‘ç½‘ç»œè¯·æ±‚çš„å“åº”æ—¶é—´éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå›¾ç‰‡æ˜¯ç¨‹åºåŒ–ç”Ÿæˆè€Œéè·å–ç½‘ç»œæ•°æ®å¾—åˆ°çš„ã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘è®¤ä¸ºä¸»è¦çš„å¥½å¤„å¦‚ä¸‹ã€‚</p>
<ul>
<li>èƒ½å¤Ÿåˆ›å»ºå®Œå…¨å¯å®šåˆ¶çš„å›¾åƒï¼Œè€Œä¸æ˜¯é™æ€å›¾åƒã€‚</li>
<li>å®ƒåˆ›å»ºä¸åˆ†è¾¨ç‡æ— å…³çš„å›¾åƒï¼ˆè®©æˆ‘ä»¬çš„ç«™ç‚¹ä¸Šä¸å†æœ‰è´¨é‡å·®çš„å›¾åƒï¼‰ã€‚</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„é‡è¦ä¸€ç‚¹æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>polyfill</code>
ç­‰åº“ä½œä¸ºè§£å†³æ–¹æ¡ˆæ¥æ”¯æŒå°šæœªå®ç° CSS Painting API çš„ Firefox
ç­‰æµè§ˆå™¨ã€‚</p>
<hr>
<p>å¦‚æœä½ å¯¹æœ¬æ–‡æœ‰ä»»ä½•ç–‘é—®æˆ–æƒ³æ³•ï¼Œè¯·åœ¨è¯„è®ºåŒºå‘Šè¯‰æˆ‘ä»¬ï¼æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼</p>



            </div>
        </article>
        <div class="sidebar">
            <div class="about-box">
    <div class="avatar">
        <img src="/assets/media/bitmap/avatar.jpeg" alt="avatar">
    </div>
    <h1>éœœç¾½ Hoarfroster</h1>
    <h2>@PassionPenguin</h2>
    <p class="moment"><span class="status">ğŸ¤”</span><span>åŠªåŠ›ï¼</span></p>
    <ul>
        <li><i class="fa-solid fa-location-dot"></i> å¹¿ä¸œ Â· å¹¿å· | <span class="light">Guangzhou, China</span>
        </li>
        <li><i class="fa-solid fa-envelope"></i> <a href="mailto:hoarfroster@outlook.com">hoarfroster@outlook.com</a>
        </li>
        <li><i class="fa-solid fa-house"></i> <a href="https://story.hoarfroster.space/">https://story.hoarfroster.space/</a>
        </li>
    </ul>
</div>
<div class="organization">
    <h4>ç»„ç»‡ Organizations</h4>
    <ul>
        <li>
            <img src="https://avatars.githubusercontent.com/u/81648011?s=60&amp;v=4"
                alt="Hexa-Penguin"><span>Hexa-Penguin</span>
        </li>
        <li>
            <img src="https://avatars.githubusercontent.com/u/10482599?s=60&amp;v=4" alt="xitu"><span>ç¨€åœŸ xitu</span>
        </li>
    </ul>
</div>
<div class="category">
    <span class="title">æ–‡ç« åˆ†ç±»</span>
    <ul>
        <!-- <li><a href="/archive.html">æ‰€æœ‰åˆ†ç±»</a></li> -->
    </ul>
</div>
<div class="archive">
    <span class="title">æ–‡ç« å­˜æ¡£</span>
    <ul>
        <!-- <li><a href="/archive.html">æ‰€æœ‰æ–‡ç« </a></li> -->
    </ul>
</div>
        </div>
    </div>
    <div class="footer">
    <div class="content">
        <div class="about">
            <p>éœœç¾½ Hoarfroster</p>
            <p>&copy; Copyright 2021 Hoarfroster and contributors.</p>
        </div>
        <div class="nav">
            <div class="links">
                <span class="title">å…³äºæ–‡ç« </span>
                <ul>
                    <li><a href="/archive.html">æ–‡ç« å­˜æ¡£</a></li>
                </ul>
            </div>
            <div class="category">
                <span class="title">å…³äºéœœç¾½</span>
                <ul>
                    <li><a href="/about.html">æœ‰å…³éœœç¾½</a></li>
                </ul>
            </div>
        </div>
    </div>
    <ul class="social-accounts">
        <li>
            <a href="https://www.zhihu.com/people/shuang-yu-29-75">
                <i class="fa-brands fa-zhihu" style="font-size: 24px; color:#06f; line-height: 24px;"></i>
            </a>
        </li>
        <li>
            <a href="https://github.com/PassionPenguin">
                <img src="/assets/media/vectors/github.svg" alt="github-logo"/>
            </a>
        </li>
        <li>
            <a href="https://dribbble.com/Hoarfroster">
                <img src="/assets/media/vectors/dribbble.svg" alt="dribbble-logo"/>
            </a>
        </li>
        <li>
            <a href="https://zh.wikipedia.org/wiki/User:HoarfrostFeather">
                <i class="fa-brands fa-wikipedia-w" style="font-size: 22px; color: #888; line-height: 24px;"></i>
            </a>
        </li>
        <li>
            <a href="https://space.bilibili.com/201469972">
                <i class="fa-brands fa-bilibili" style="font-size: 22px; color: #00a1d6; line-height: 24px;"></i>
            </a>
        </li>
    </ul>
</div>
</body>

</html>